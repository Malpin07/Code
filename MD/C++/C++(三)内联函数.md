<!-- TOC -->
* [C++(三)](#c三)
* [内联函数](#内联函数)
<!-- TOC -->
# C++(三)

C 语言中有宏函数的概念。宏函数的特点是内嵌到调用代码中去，避免了函数调用
的开销。

但是由于宏函数的处理发生在预处理阶段，缺失了语法检测和有可能带来的语
意差错。

|| 宏函数| 普通函数|
|-------|--------|--------|
|优点|内嵌代码,避免压栈和出栈的开销|高度抽象,避免重复开发,类型检查|
|缺点|代码替换，易使生成代码体积变大，易产生逻辑错误，无类型检查。|压栈与出栈，带来开销|
```c++
#include <iostream>
#include <string.h>
using namespace std;
#define SQR(x) ((x)*(x))
int sqr(int x)
{
    return x*x;
}
int main()
{
    int i=0;
    while(i<5)
    {
        printf("%d\n",SQR(i++));
        printf("%d\n",sqr(i++));
    }
    return 0;
}
```

# 内联函数
内联函数（inline function）是C++中的一种编程技巧，用于提高程序的执行效率。内联函数的基本思想是将函数调用替换为函数体，从而减少函数调用的开销。内联函数通常用于函数体较小且频繁调用的函数。

在C++中，可以通过在函数定义前加上inline关键字来声明一个内联函数。例如：

```c++
#include <iostream>

// 声明内联函数
inline int add(int a, int b) {
    return a + b;
}

int main() {
    int result = add(3, 4);  // 这里编译器可能会将add函数的调用替换为函数体
    std::cout << "Result: " << result << std::endl;
    return 0;
}

```

```c++
需要注意的是，inline关键字只是向编译器建议将该函数作为内联函数处理，但编译器可以选择忽略这个建议。编译器会根据函数的复杂度和调用频率等因素来决定是否将函数内联。

内联函数的优点：

减少函数调用的开销，提高程序执行效率。
适用于函数体较小且频繁调用的函数。
内联函数的缺点：

如果内联函数体较大，可能会导致生成的代码膨胀，反而降低效率。
内联函数不能递归调用。
总之，内联函数是一种优化手段，但在使用时需要权衡其优缺点，并根据具体情况进行选择。
```